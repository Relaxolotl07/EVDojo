<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EVDojo — Interview Analysis</title>
    <link rel="stylesheet" href="/styles.css" />
    <!-- Emscripten shim for MediaPipe WASM: avoid Module.arguments aborts -->
    <script>window.arguments_ = window.arguments_ || []; window.Module = window.Module || { arguments_: [] };</script>
    <!-- MediaPipe FaceMesh for robust face/landmark detection (loaded from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <style>
      .video-wrap { position: relative; border: 1px solid var(--border); border-radius: 16px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.06); }
      video { width: 100%; display: block; background: #000; }
      canvas { position: absolute; left: 0; top: 0; width: 100%; height: 100%; pointer-events: none; }
      .indicator { position: absolute; left: 12px; top: 12px; background: var(--chip-bg); border: 1px solid var(--border); border-radius: 999px; padding: 6px 10px; font-weight: 700; }
      .indicator.positive { background: #fff7e6; border-color: #ffd591; }
      .legend { margin-top: 10px; color: var(--muted); font-size: 14px; }
      .debugbox { margin-top: 8px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12px; color: var(--muted); }
    </style>
  </head>
  <body class="celestial-bg">
    <div class="container">
      <div class="navbar">
        <div class="brand"><div class="logo"></div><h1>EVDojo</h1></div>
        <div class="navlinks"><a class="link" href="/">Home</a></div>
      </div>

      <div class="card">
        <h3>Topic: interview-analysis</h3>
        <div class="legend">This demo detects a simple nod action and shows smile/mouth‑open indicators from a sample video (or your webcam). Toggle debug to see live values.</div>
      </div>

      <div class="video-wrap">
        <div id="indicator" class="indicator">Waiting…</div>
        <video id="vid" playsinline muted autoplay loop></video>
        <canvas id="overlay" width="640" height="360"></canvas>
      </div>

      <div class="row" style="margin-top:12px">
        <button id="useSample">Use Sample Video</button>
        <button class="ghost" id="useWebcam">Use Webcam</button>
        <button class="ghost" id="toggleDebug">Toggle Debug</button>
      </div>
      <div id="debugPanel" class="debugbox hidden"></div>
    </div>

    <script src="/interview.js"></script>
  </body>
  </html>
